{"version":3,"sources":["webpack:///./src/components/card/index.js","webpack:///./src/api/animeThemes/anime.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/use-debounce/esm/useDebounce.js","webpack:///./node_modules/use-debounce/esm/useDebouncedCallback.js","webpack:///./src/api/animeThemes/theme.js","webpack:///./src/api/animeThemes/artist.js","webpack:///./src/api/animeThemes/search.js","webpack:///./src/hooks/useSearch.js","webpack:///./src/components/card/searchResult/theme.js","webpack:///./src/components/card/searchResult/artist.js","webpack:///./src/hooks/useAniListArtist.js","webpack:///./src/components/search/global.js","webpack:///./src/pages/search.js","webpack:///./src/utils/withCache.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./src/components/card/searchResult/index.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/components/card/searchResult/anime.js","webpack:///./src/components/button/play.js","webpack:///./src/components/utils/songTitleWithArtists.js","webpack:///./node_modules/node-fetch/browser.js","webpack:///./src/api/animeThemes/index.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js"],"names":["StyledCard","styled","div","props","theme","colors","secondaryTitle","primaryBackground","elevation","hoverable","css","Card","children","require","baseUrl","fetchJsonCached","fields","createFieldParams","anime","synonym","song","artist","entry","video","series","resource","fetchAnimeList","reporter","activity","activityTimer","start","animeList","nextUrl","page","push","links","next","setStatus","length","end","module","exports","fetchAnime","slug","fetchAnimeSearch","query","limit","then","json","fetchAnimeSlugs","map","alias","fetchAnimeByYear","year","fetchAvailableYears","TypeError","valueEquality","left","right","useDebounce","value","delay","options","eq","equalityFn","_a","state","dispatch","_b","callback","maxWait","maxWaitHandler","maxWaitArgs","leading","trailing","undefined","leadingCall","functionTimeoutHandler","isComponentUnmounted","debouncedFunction","current","cancelDebouncedCallback","clearTimeout","debouncedCallback","args","_i","arguments","apply","setTimeout","shouldCallFunction","callPending","useDebouncedCallback","cancel","previousValue","fetchThemeSearch","themes","fetchArtistSearch","artists","fetchSearch","fetchSearchResults","entity","a","results","animeResults","themeResults","artistResults","ThemeSearchResultCard","useSWR","data","image","useAniList","title","description","name","ArtistSearchResultCard","useState","setImage","useEffect","isCanceled","fetchAniListArtist","aniListArtist","useAniListArtist","songs","GlobalSearch","searchQuery","searchEntity","isValidating","stickyResults","useRef","useSearch","isSearching","block","gapsColumn","EntitySearch","useLocation","urlSuffix","search","hash","resultCards","result","id","variant","row","justifyContent","to","icon","faChevronDown","fixedWidth","StyledSearchPage","SearchPage","location","pathname","useMemo","match","urlParams","URLSearchParams","get","setSearchQuery","debouncedSearchQuery","newUrlParams","set","params","toString","url","navigate","replace","setQuery","cache","Map","key","init","has","iter","Symbol","iterator","Object","Array","from","StyledSearchResultCard","StyledCover","img","StyledBody","StyledChildren","SearchResultCard","card","alt","src","link","maxLines","small","arrayLikeToArray","arr","isArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","len","i","arr2","o","minLen","n","prototype","call","slice","constructor","test","AnimeSearchResultCard","premiere","season","wrap","gapsBoth","faEllipsisH","StyledButtonPlay","Button","StyledPrefix","secondaryBackground","ButtonPlay","faPlay","SongTitleWithArtists","index","as","global","self","window","Error","getGlobal","fetch","default","bind","Headers","Request","Response","withCache","process","GATSBY_API_URL","response","entries","join","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","fn","this","err"],"mappings":"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","file":"component---src-pages-search-js-6ea38cbfcecc8f242afb.js","sourcesContent":["import React from \"react\";\nimport styled, {css} from \"styled-components\";\n\nconst StyledCard = styled.div`\n    padding: 1rem 1.5rem;\n    border-left: 4px solid ${(props) => props.theme.colors.secondaryTitle};\n    border-radius: 0 0.5rem 0.5rem 0;\n\n    background-color: ${(props) => props.theme.colors.primaryBackground[props.theme.elevation]};\n\n    ${(props) => props.hoverable && css`\n        cursor: pointer;\n\n        &:hover {\n            background-color: ${(props) => props.theme.colors.primaryBackground[props.theme.elevation + 1]};\n        }\n    `}\n`;\n\nexport default function Card({ children, ...props }) {\n    return (\n        <StyledCard {...props}>\n            {children}\n        </StyledCard>\n    )\n}\n","const { baseUrl, fetchJsonCached, createFieldParams } = require(\"./index\");\n\nconst fields = createFieldParams({\n    anime:    [ \"id\", \"name\", \"alias\", \"year\", \"season\" ],\n    synonym:  [ \"text\" ],\n    theme:    [ \"id\", \"slug\", \"group\" ],\n    song:     [ \"title\" ],\n    artist:   [ \"name\", \"as\" ],\n    entry:    [ \"version\", \"episodes\", \"nsfw\", \"spoiler\" ],\n    video:    [ \"filename\", \"link\", \"resolution\", \"nc\", \"subbed\", \"lyrics\", \"uncen\", \"source\", \"overlap\" ],\n    series:   [ \"name\" ],\n    resource: [ \"link\", \"type\" ]\n});\n\nfunction fetchAnime(slug) {\n    return fetchJsonCached(`${baseUrl}/api/anime/${slug}`);\n}\n\nasync function fetchAnimeList({ reporter }) {\n    const activity = reporter.activityTimer(\"Fetching anime list\");\n    activity.start();\n\n    const animeList = [];\n\n    let nextUrl = `${baseUrl}/api/anime?page[size]=100&${fields}`;\n    while (nextUrl) {\n        const page = await fetchJsonCached(nextUrl);\n\n        animeList.push(...page.anime);\n\n        nextUrl = page.links.next;\n\n        activity.setStatus(`${animeList.length} anime fetched`);\n    }\n\n    activity.end();\n\n    return animeList;\n}\n\nfunction fetchAnimeSearch(query = \"\", limit = 5) {\n    return fetchJsonCached(`${baseUrl}/api/anime?page[size]=${limit}&${fields}&q=${query}`)\n        .then((json) => json.anime);\n}\n\nfunction fetchAnimeSlugs() {\n    return fetchAnimeList()\n        .then((animeList) => animeList.map((anime) => anime.alias));\n}\n\nfunction fetchAnimeByYear(year) {\n    return fetchJsonCached(`${baseUrl}/api/year/${year}`);\n}\n\nfunction fetchAvailableYears() {\n    return fetchJsonCached(`${baseUrl}/api/year`);\n}\n\nmodule.exports = {\n    fetchAnime,\n    fetchAnimeList,\n    fetchAnimeSearch,\n    fetchAnimeSlugs,\n    fetchAnimeByYear,\n    fetchAvailableYears\n};\n","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","import { useCallback, useEffect, useRef, useState } from 'react';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nfunction valueEquality(left, right) {\n  return left === right;\n}\n\nexport default function useDebounce(value, delay, options) {\n  var eq = options && options.equalityFn ? options.equalityFn : valueEquality;\n\n  var _a = useState(value),\n      state = _a[0],\n      dispatch = _a[1];\n\n  var _b = useDebouncedCallback(useCallback(function (value) {\n    return dispatch(value);\n  }, []), delay, options),\n      callback = _b[0],\n      cancel = _b[1],\n      callPending = _b[2];\n\n  var previousValue = useRef(value);\n  useEffect(function () {\n    // We need to use this condition otherwise we will run debounce timer for the first render (including maxWait option)\n    if (!eq(previousValue.current, value)) {\n      callback(value);\n      previousValue.current = value;\n    }\n  }, [value, callback, eq]);\n  return [state, cancel, callPending];\n}","import { useRef, useCallback, useEffect } from 'react';\nexport default function useDebouncedCallback(callback, delay, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var maxWait = options.maxWait;\n  var maxWaitHandler = useRef(null);\n  var maxWaitArgs = useRef([]);\n  var leading = options.leading;\n  var trailing = options.trailing === undefined ? true : options.trailing;\n  var leadingCall = useRef(false);\n  var functionTimeoutHandler = useRef(null);\n  var isComponentUnmounted = useRef(false);\n  var debouncedFunction = useRef(callback);\n  debouncedFunction.current = callback;\n  var cancelDebouncedCallback = useCallback(function () {\n    clearTimeout(functionTimeoutHandler.current);\n    clearTimeout(maxWaitHandler.current);\n    maxWaitHandler.current = null;\n    maxWaitArgs.current = [];\n    functionTimeoutHandler.current = null;\n    leadingCall.current = false;\n  }, []);\n  useEffect(function () {\n    // We have to set isComponentUnmounted to be truth, as fast-refresh runs all useEffects\n    isComponentUnmounted.current = false;\n    return function () {\n      // we use flag, as we allow to call callPending outside the hook\n      isComponentUnmounted.current = true;\n    };\n  }, []);\n  var debouncedCallback = useCallback(function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    maxWaitArgs.current = args;\n    clearTimeout(functionTimeoutHandler.current);\n\n    if (leadingCall.current) {\n      leadingCall.current = false;\n    }\n\n    if (!functionTimeoutHandler.current && leading && !leadingCall.current) {\n      debouncedFunction.current.apply(debouncedFunction, args);\n      leadingCall.current = true;\n    }\n\n    functionTimeoutHandler.current = setTimeout(function () {\n      var shouldCallFunction = true;\n\n      if (leading && leadingCall.current) {\n        shouldCallFunction = false;\n      }\n\n      cancelDebouncedCallback();\n\n      if (!isComponentUnmounted.current && trailing && shouldCallFunction) {\n        debouncedFunction.current.apply(debouncedFunction, args);\n      }\n    }, delay);\n\n    if (maxWait && !maxWaitHandler.current && trailing) {\n      maxWaitHandler.current = setTimeout(function () {\n        var args = maxWaitArgs.current;\n        cancelDebouncedCallback();\n\n        if (!isComponentUnmounted.current) {\n          debouncedFunction.current.apply(null, args);\n        }\n      }, maxWait);\n    }\n  }, [maxWait, delay, cancelDebouncedCallback, leading, trailing]);\n  var callPending = useCallback(function () {\n    // Call pending callback only if we have anything in our queue\n    if (!functionTimeoutHandler.current) {\n      return;\n    }\n\n    debouncedFunction.current.apply(null, maxWaitArgs.current);\n    cancelDebouncedCallback();\n  }, [cancelDebouncedCallback]); // At the moment, we use 3 args array so that we save backward compatibility\n\n  return [debouncedCallback, cancelDebouncedCallback, callPending];\n}","const { baseUrl, fetchJsonCached } = require(\"./index\");\n\nexport function fetchTheme(id) {\n    return fetchJsonCached(`${baseUrl}/api/theme/${id}`);\n}\n\nexport function fetchThemeSearch(query = \"\", limit = 5) {\n    return fetchJsonCached(`${baseUrl}/api/theme?page[size]=${limit}&q=${query}`)\n        .then((json) => json.themes);\n}\n","const { baseUrl, fetchJsonCached } = require(\"./index\");\n\nexport function fetchArtistSearch(query = \"\", limit = 5) {\n    return fetchJsonCached(`${baseUrl}/api/artist?page[size]=${limit}&q=${query}`)\n        .then((json) => json.artists);\n}\n","const { baseUrl, fetchJsonCached } = require(\"./index\");\n\nexport function fetchSearch(query = \"\", limit = 3, fields = [ \"anime\", \"themes\", \"artists\" ]) {\n    return fetchJsonCached(`${baseUrl}/api/search?limit=${limit}&q=${query}`);\n}\n","import {useRef} from \"react\";\nimport useSWR from \"swr\";\nimport {fetchAnimeSearch} from \"api/animeThemes/anime\";\nimport {fetchThemeSearch} from \"api/animeThemes/theme\";\nimport {fetchArtistSearch} from \"api/animeThemes/artist\";\nimport {fetchSearch} from \"api/animeThemes/search\";\n\nconst createEmptyResults = () => ({\n    animeResults: [],\n    themeResults: [],\n    artistResults: []\n});\n\nexport default function useSearch(entity, query) {\n    const { data: results, isValidating } = useSWR([ entity, query ], fetchSearchResults);\n\n    const stickyResults = useRef();\n    if (results !== undefined) {\n        stickyResults.current = results;\n    }\n\n    return [ stickyResults.current || createEmptyResults(), isValidating ];\n}\n\nasync function fetchSearchResults(entity, query) {\n    let results = createEmptyResults();\n\n    if (query) {\n        switch (entity) {\n            case \"anime\":\n                results.animeResults = await fetchAnimeSearch(query, 10);\n                break;\n            case \"theme\":\n                results.themeResults = await fetchThemeSearch(query, 10);\n                break;\n            case \"artist\":\n                results.artistResults = await fetchArtistSearch(query, 10)\n                break;\n            default:\n                const {anime, themes, artists} = await fetchSearch(query);\n                results = {\n                    animeResults: anime,\n                    themeResults: themes,\n                    artistResults: artists\n                };\n                break;\n        }\n    }\n\n    return results;\n}\n","import React from \"react\";\nimport useSWR from \"swr\";\nimport {fetchAnime} from \"api/animeThemes/anime\";\nimport useAniList from \"hooks/useAniList\";\nimport SearchResultCard from \"components/card/searchResult\";\nimport SongTitleWithArtists from \"components/utils/songTitleWithArtists\";\n\nexport default function ThemeSearchResultCard({ theme }) {\n    const { data: anime } = useSWR(theme.anime.alias, fetchAnime);\n    const { image } = useAniList(anime);\n\n    return (\n        <SearchResultCard\n            title={<SongTitleWithArtists song={theme.song}/>}\n            description={`Theme • ${theme.slug} • ${theme.anime.name}`}\n            image={image}\n        />\n    );\n}\n","import React from \"react\";\nimport useAniListArtist from \"hooks/useAniListArtist\";\nimport SearchResultCard from \"components/card/searchResult\";\n\nexport default function ArtistSearchResultCard({ artist }) {\n    const { image } = useAniListArtist(artist);\n\n    return (\n        <SearchResultCard\n            title={artist.name}\n            description={`Artist • ${artist.songs.length} songs`}\n            image={image}\n        />\n    );\n}\n","import {fetchAniListArtist} from \"api/aniList\";\nimport {useEffect, useState} from \"react\";\n\nexport default function useAniList(artist) {\n    const [image, setImage] = useState(null);\n\n    useEffect(() => {\n        let isCanceled = false;\n\n        fetchAniListArtist(artist.name)\n            .then(aniListArtist => {\n                if (!isCanceled) {\n                    setImage(aniListArtist.image);\n                }\n            });\n\n        return () => { isCanceled = true };\n    }, [artist]);\n\n    return { image };\n}\n","import React from \"react\";\nimport {useLocation} from \"@reach/router\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronDown} from \"@fortawesome/free-solid-svg-icons\";\nimport useSearch from \"hooks/useSearch\";\nimport AnimeSearchResultCard from \"components/card/searchResult/anime\";\nimport ThemeSearchResultCard from \"components/card/searchResult/theme\";\nimport Button from \"components/button\";\nimport Text from \"components/text\";\nimport Title from \"components/text/title\";\nimport ArtistSearchResultCard from \"components/card/searchResult/artist\";\nimport Flex from \"components/flex\";\n\nexport default function GlobalSearch({ searchQuery, searchEntity }) {\n    const [ results, isSearching ] = useSearch(searchEntity, searchQuery);\n\n    if (!searchQuery) {\n        return (\n            <Text block>Type in a query to begin searching.</Text>\n        );\n    }\n\n    const {animeResults, themeResults, artistResults} = results;\n    const totalResults = animeResults.length + themeResults.length + artistResults.length;\n\n    if (!totalResults) {\n        if (isSearching) {\n            return (\n                <Text block>Searching...</Text>\n            );\n        }\n\n        return (\n            <Text block>No results found for query \"{searchQuery}\". Did you spell it correctly?</Text>\n        );\n    }\n\n    return (\n        <Flex gapsColumn=\"1rem\">\n            <EntitySearch searchEntity={searchEntity} entity=\"anime\" title=\"Anime\" results={animeResults}/>\n            <EntitySearch searchEntity={searchEntity} entity=\"theme\" title=\"Themes\" results={themeResults}/>\n            <EntitySearch searchEntity={searchEntity} entity=\"artist\" title=\"Artist\" results={artistResults}/>\n        </Flex>\n    );\n}\n\nfunction EntitySearch({ searchEntity, entity, title, results }) {\n    const { search, hash } = useLocation();\n    const urlSuffix = search + hash;\n\n    if ((searchEntity && searchEntity !== entity) || !results.length) {\n        return null;\n    }\n\n    let resultCards = results.map((result) => {\n        switch (entity) {\n            case \"anime\":\n                return <AnimeSearchResultCard key={result.id} anime={result}/>;\n            case \"theme\":\n                return <ThemeSearchResultCard key={result.id} theme={result}/>;\n            case \"artist\":\n                return <ArtistSearchResultCard key={result.id} artist={result}/>;\n            default:\n                return null;\n        }\n    });\n\n    return (\n        <>\n            {!searchEntity && (\n                <Title variant=\"section\">{title}</Title>\n            )}\n            {resultCards}\n            {!searchEntity && (\n                <Flex row justifyContent=\"center\">\n                    <Button to={`/search/${entity}${urlSuffix}`} icon>\n                        <FontAwesomeIcon icon={faChevronDown} fixedWidth/>\n                    </Button>\n                </Flex>\n            )}\n        </>\n    );\n}\n","import {useEffect, useMemo, useState} from \"react\";\nimport styled from \"styled-components\";\nimport {navigate} from \"gatsby\";\nimport {useDebounce} from \"use-debounce\";\nimport SearchInput from \"components/input/search\";\nimport GlobalSearch from \"components/search/global\";\nimport {gapsColumn} from \"styles/mixins\";\nimport Title from \"components/text/title\";\n\nconst StyledSearchPage = styled.div`\n    ${gapsColumn(\"1.5rem\")}\n`;\n\nexport default function SearchPage({ location: { pathname, search } }) {\n    const entity = useMemo(() => pathname.match(/\\/search(?:\\/(.+))?/)[1], [ pathname ]);\n    const urlParams = useMemo(() => new URLSearchParams(search), [ search ]);\n\n    const [ searchQuery, setSearchQuery ] = useState(urlParams.get(\"q\") || \"\");\n    const [ debouncedSearchQuery ] = useDebounce(searchQuery, 500);\n\n    // Temporary effect to listen for changes to the search query that may be made by the quick search (WIP)\n    useEffect(() => { setSearchQuery(urlParams.get(\"q\")) }, [ urlParams ]);\n\n    useEffect(() => {\n        // Update URL to maintain the searchQuery on page navigation.\n        const newUrlParams = new URLSearchParams();\n        if (searchQuery) {\n            newUrlParams.set(\"q\", searchQuery);\n        }\n        const params = newUrlParams.toString();\n\n        let url = \"/search\";\n        if (entity) {\n            url += `/${entity}`;\n        }\n        if (params) {\n            url += `?${params}`;\n        }\n\n        navigate(url, { replace: true });\n    }, [ entity, searchQuery ]);\n\n    return (\n        <StyledSearchPage>\n            <Title>Search</Title>\n            <SearchInput query={searchQuery} setQuery={setSearchQuery} isSearching={false}/>\n            <GlobalSearch searchEntity={entity} searchQuery={debouncedSearchQuery}/>\n        </StyledSearchPage>\n    );\n}\n","const cache = new Map();\n\nfunction withCache(key, init) {\n    if (!cache.has(key)) {\n        cache.set(key, init(key));\n    }\n\n    return cache.get(key);\n}\n\nmodule.exports = withCache;\n","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","import React from \"react\";\nimport {Link} from \"gatsby\";\nimport Text from \"components/text\";\nimport Title from \"components/text/title\";\nimport styled from \"styled-components\";\nimport Card from \"components/card/index\";\n\nconst StyledSearchResultCard = styled(Card)`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    padding: 0 1rem 0 0;\n`;\nconst StyledCover = styled.img`\n    width: 48px;\n    height: 64px;\n    object-fit: cover;\n`;\nconst StyledBody = styled.div`\n    flex: 1;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    padding: 0 1rem;\n`;\nconst StyledChildren = styled.div`\n    @media (max-width: 720px) {\n        display: none;\n    }\n`;\n\nexport default function SearchResultCard({ title, description, image, to, children, ...props }) {\n    const card = (\n        <StyledSearchResultCard {...props}>\n            <StyledCover alt=\"Cover\" src={image}/>\n            <StyledBody>\n                <Title variant=\"card\" link maxLines={2}>{title}</Title>\n                <Text small maxLines={1}>{description}</Text>\n            </StyledBody>\n            <StyledChildren>\n                {children}\n            </StyledChildren>\n        </StyledSearchResultCard>\n    );\n\n    if (to) {\n        return (\n            <Link to={to}>\n                {card}\n            </Link>\n        );\n    }\n\n    return card;\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","import React from \"react\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faEllipsisH} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"components/button\";\nimport Flex from \"components/flex\";\nimport Text from \"components/text\";\nimport useAniList from \"hooks/useAniList\";\nimport SearchResultCard from \"components/card/searchResult\";\nimport Elevator from \"components/elevator\";\nimport ButtonPlay from \"components/button/play\";\n\nexport default function AnimeSearchResultCard({ anime }) {\n    const { image } = useAniList(anime);\n\n    let premiere = anime.year;\n    if (anime.season) {\n        premiere = anime.season + \" \" + premiere;\n    }\n\n    return (\n        <SearchResultCard\n            title={anime.name}\n            description={`Anime • ${premiere} • ${anime.themes.length} themes`}\n            image={image}\n            to={`/anime/${anime.alias}`}\n        >\n            <Elevator>\n                <Flex row wrap gapsBoth=\"0.75rem\">\n                    {anime.themes.slice(0, 4).map((theme) => (\n                        <ButtonPlay key={theme.id} to={`/theme/${theme.id}`}>\n                            <Text small>{theme.slug}</Text>\n                        </ButtonPlay>\n                    ))}\n                    {anime.themes.length > 4 && (\n                        <Button icon title=\"Show all themes\">\n                            <FontAwesomeIcon icon={faEllipsisH} fixedWidth/>\n                        </Button>\n                    )}\n                </Flex>\n            </Elevator>\n        </SearchResultCard>\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faPlay} from \"@fortawesome/free-solid-svg-icons\";\nimport Button from \"components/button\";\n\nconst StyledButtonPlay = styled(Button)`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    margin-left: 1rem;\n    padding: 0 0.5rem 0 0;\n`;\nconst StyledPrefix = styled.div`\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n\n    width: 2rem;\n    height: 2rem;\n    margin-left: -1rem;\n    border-radius: 1rem;\n\n    background-color: ${(props) => props.theme.colors.secondaryBackground};\n    color: ${(props) => props.theme.colors.primaryBackground[0]};\n`;\n\nexport default function ButtonPlay({ children, ...props }) {\n    return (\n        <StyledButtonPlay {...props}>\n            <StyledPrefix>\n                <FontAwesomeIcon icon={faPlay} fixedWidth />\n            </StyledPrefix>\n            {children}\n        </StyledButtonPlay>\n    );\n}\n","import Title from \"components/text/title\";\nimport Text from \"components/text\";\n\nexport default function SongTitleWithArtists({ song }) {\n    return (\n        <Title variant=\"card\">\n            <Text link>{song.title}</Text>\n            {!!song.artists && !!song.artists.length && (\n                <>\n                    <Text small> by </Text>\n                    {song.artists.map((artist, index) => (\n                        <Text key={artist.as || artist.name} link>\n                            {(artist.as || artist.name) + (index === song.artists.length - 2 ? \" & \" : index < song.artists.length - 1 ? \", \" : \"\")}\n                        </Text>\n                    ))}\n                </>\n            )}\n        </Title>\n    );\n}\n","\"use strict\"; // ref: https://github.com/tc39/proposal-global\n\nvar getGlobal = function getGlobal() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  throw new Error('unable to locate global object');\n};\n\nvar global = getGlobal();\nmodule.exports = exports = global.fetch; // Needed for TypeScript and Webpack.\n\nif (global.fetch) {\n  exports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","const fetch = require(\"node-fetch\");\nconst withCache = require(\"../../utils/withCache\");\n\nconst baseUrl = process.env.GATSBY_API_URL || \"https://animethemes.dev\";\n\nconst requestCooldown = 1000;\nlet lastRequest;\n\nasync function fetchJsonCached(url, init) {\n    // Debounce, we should only request once every second\n    if (lastRequest) {\n        const expiredTime = Date.now() - lastRequest;\n        if (expiredTime < requestCooldown) {\n            await sleep(requestCooldown - expiredTime);\n        }\n    }\n\n    return await withCache(\n        url,\n        (url) => fetch(url, init).then((response) => response.json())\n    );\n}\n\nfunction createFieldParams(fields) {\n    return Object.entries(fields)\n        .map(([ key, values ]) => `fields[${key}]=${values.join()}`)\n        .join(\"&\");\n}\n\nasync function sleep(millis) {\n    return await new Promise((resolve) => setTimeout(resolve, millis));\n}\n\nmodule.exports = {\n    baseUrl,\n    fetchJsonCached,\n    createFieldParams\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;"],"sourceRoot":""}