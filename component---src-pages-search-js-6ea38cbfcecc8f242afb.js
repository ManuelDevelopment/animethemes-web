(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"4Fil":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("zLVn"),i=n("nKUr"),a=(n("q1tI"),n("vOnD")),c=a.d.div.withConfig({displayName:"card__StyledCard",componentId:"sc-1do00gu-0"})(["padding:1rem 1.5rem;border-left:4px solid ",";border-radius:0 0.5rem 0.5rem 0;background-color:",";",""],(function(e){return e.theme.colors.secondaryTitle}),(function(e){return e.theme.colors.primaryBackground[e.theme.elevation]}),(function(e){return e.hoverable&&Object(a.c)(["cursor:pointer;&:hover{background-color:",";}"],(function(e){return e.theme.colors.primaryBackground[e.theme.elevation+1]}))}));function s(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(i.jsx)(c,Object.assign({},n,{children:t}))}},"9AYc":function(e,t,n){var r=n("o0o1"),i=n("RIqP");n("ls82");var a=n("yXPU"),c=n("xng9"),s=c.baseUrl,u=c.fetchJsonCached,o=(0,c.createFieldParams)({anime:["id","name","alias","year","season"],synonym:["text"],theme:["id","slug","group"],song:["title"],artist:["name","as"],entry:["version","episodes","nsfw","spoiler"],video:["filename","link","resolution","nc","subbed","lyrics","uncen","source","overlap"],series:["name"],resource:["link","type"]});function l(e){return f.apply(this,arguments)}function f(){return(f=a(r.mark((function e(t){var n,a,c,l,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.reporter,(a=n.activityTimer("Fetching anime list")).start(),c=[],l=s+"/api/anime?page[size]=100&"+o;case 5:if(!l){e.next=14;break}return e.next=8,u(l);case 8:f=e.sent,c.push.apply(c,i(f.anime)),l=f.links.next,a.setStatus(c.length+" anime fetched"),e.next=5;break;case 14:return a.end(),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={fetchAnime:function(e){return u(s+"/api/anime/"+e)},fetchAnimeList:l,fetchAnimeSearch:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=5),u(s+"/api/anime?page[size]="+t+"&"+o+"&q="+e).then((function(e){return e.anime}))},fetchAnimeSlugs:function(){return l().then((function(e){return e.map((function(e){return e.alias}))}))},fetchAnimeByYear:function(e){return u(s+"/api/year/"+e)},fetchAvailableYears:function(){return u(s+"/api/year")}}},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},Bxyr:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return K}));var r=n("nKUr"),i=n("q1tI"),a=n("vOnD"),c=n("Wbzz");function s(e,t){return e===t}function u(e,t,n){var r=n&&n.equalityFn?n.equalityFn:s,a=Object(i.useState)(e),c=a[0],u=a[1],o=function(e,t,n){void 0===n&&(n={});var r=n.maxWait,a=Object(i.useRef)(null),c=Object(i.useRef)([]),s=n.leading,u=void 0===n.trailing||n.trailing,o=Object(i.useRef)(!1),l=Object(i.useRef)(null),f=Object(i.useRef)(!1),d=Object(i.useRef)(e);d.current=e;var h=Object(i.useCallback)((function(){clearTimeout(l.current),clearTimeout(a.current),a.current=null,c.current=[],l.current=null,o.current=!1}),[]);Object(i.useEffect)((function(){return f.current=!1,function(){f.current=!0}}),[]);var m=Object(i.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];c.current=e,clearTimeout(l.current),o.current&&(o.current=!1),l.current||!s||o.current||(d.current.apply(d,e),o.current=!0),l.current=setTimeout((function(){var t=!0;s&&o.current&&(t=!1),h(),!f.current&&u&&t&&d.current.apply(d,e)}),t),r&&!a.current&&u&&(a.current=setTimeout((function(){var e=c.current;h(),f.current||d.current.apply(null,e)}),r))}),[r,t,h,s,u]),b=Object(i.useCallback)((function(){l.current&&(d.current.apply(null,c.current),h())}),[h]);return[m,h,b]}(Object(i.useCallback)((function(e){return u(e)}),[]),t,n),l=o[0],f=o[1],d=o[2],h=Object(i.useRef)(e);return Object(i.useEffect)((function(){r(h.current,e)||(l(e),h.current=e)}),[e,l,r]),[c,f,d]}var o=n("/fsE"),l=n("YwZP"),f=n("IP2g"),d=n("wHSu"),h=n("o0o1"),m=n.n(h),b=(n("ls82"),n("HaE+")),j=n("VtrM"),p=n("9AYc"),g=n("xng9"),y=g.baseUrl,v=g.fetchJsonCached;function x(e,t){return void 0===e&&(e=""),void 0===t&&(t=5),v(y+"/api/theme?page[size]="+t+"&q="+e).then((function(e){return e.themes}))}var O=n("xng9"),w=O.baseUrl,k=O.fetchJsonCached;function R(e,t){return void 0===e&&(e=""),void 0===t&&(t=5),k(w+"/api/artist?page[size]="+t+"&q="+e).then((function(e){return e.artists}))}var S=n("xng9"),I=S.baseUrl,C=S.fetchJsonCached;function P(e,t,n){return void 0===e&&(e=""),void 0===t&&(t=3),void 0===n&&(n=["anime","themes","artists"]),C(I+"/api/search?limit="+t+"&q="+e)}function A(e,t){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(m.a.mark((function e(t,n){var r,i,a,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={animeResults:[],themeResults:[],artistResults:[]},!n){e.next=25;break}e.t0=t,e.next="anime"===e.t0?5:"theme"===e.t0?9:"artist"===e.t0?13:17;break;case 5:return e.next=7,Object(p.fetchAnimeSearch)(n,10);case 7:return r.animeResults=e.sent,e.abrupt("break",25);case 9:return e.next=11,x(n,10);case 11:return r.themeResults=e.sent,e.abrupt("break",25);case 13:return e.next=15,R(n,10);case 15:return r.artistResults=e.sent,e.abrupt("break",25);case 17:return e.next=19,P(n);case 19:return i=e.sent,a=i.anime,c=i.themes,s=i.artists,r={animeResults:a,themeResults:c,artistResults:s},e.abrupt("break",25);case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=n("aEzc"),U=n("IgWi"),_=n("ISyE"),L=n("gSOQ");function B(e){var t=e.theme,n=Object(j.a)(t.anime.alias,p.fetchAnime).data,i=Object(U.a)(n).image;return Object(r.jsx)(_.a,{title:Object(r.jsx)(L.a,{song:t.song}),description:"Theme • "+t.slug+" • "+t.anime.name,image:i})}var T=n("FT44"),z=n("5Vy0"),F=n("B8aR"),W=n("7L65");function Y(e){var t=e.artist,n=function(e){var t=Object(i.useState)(null),n=t[0],r=t[1];return Object(i.useEffect)((function(){var t=!1;return Object(W.a)(e.name).then((function(e){t||r(e.image)})),function(){t=!0}}),[e]),{image:n}}(t).image;return Object(r.jsx)(_.a,{title:t.name,description:"Artist • "+t.songs.length+" songs",image:n})}var D=n("L+1Y");function N(e){var t=e.searchQuery,n=e.searchEntity,a=function(e,t){var n=Object(j.a)([e,t],A),r=n.data,a=n.isValidating,c=Object(i.useRef)();return void 0!==r&&(c.current=r),[c.current||{animeResults:[],themeResults:[],artistResults:[]},a]}(n,t),c=a[0],s=a[1];if(!t)return Object(r.jsx)(z.a,{block:!0,children:"Type in a query to begin searching."});var u=c.animeResults,o=c.themeResults,l=c.artistResults;return u.length+o.length+l.length?Object(r.jsxs)(D.b,{gapsColumn:"1rem",children:[Object(r.jsx)(V,{searchEntity:n,entity:"anime",title:"Anime",results:u}),Object(r.jsx)(V,{searchEntity:n,entity:"theme",title:"Themes",results:o}),Object(r.jsx)(V,{searchEntity:n,entity:"artist",title:"Artist",results:l})]}):s?Object(r.jsx)(z.a,{block:!0,children:"Searching..."}):Object(r.jsxs)(z.a,{block:!0,children:['No results found for query "',t,'". Did you spell it correctly?']})}function V(e){var t=e.searchEntity,n=e.entity,i=e.title,a=e.results,c=Object(l.useLocation)(),s=c.search+c.hash;if(t&&t!==n||!a.length)return null;var u=a.map((function(e){switch(n){case"anime":return Object(r.jsx)(q.a,{anime:e},e.id);case"theme":return Object(r.jsx)(B,{theme:e},e.id);case"artist":return Object(r.jsx)(Y,{artist:e},e.id);default:return null}}));return Object(r.jsxs)(r.Fragment,{children:[!t&&Object(r.jsx)(F.a,{variant:"section",children:i}),u,!t&&Object(r.jsx)(D.b,{row:!0,justifyContent:"center",children:Object(r.jsx)(T.a,{to:"/search/"+n+s,icon:!0,children:Object(r.jsx)(f.a,{icon:d.d,fixedWidth:!0})})})]})}var J=n("89ka"),H=a.d.div.withConfig({displayName:"search__StyledSearchPage",componentId:"sc-1mbyf7d-0"})(["",""],Object(J.b)("1.5rem"));function K(e){var t=e.location,n=t.pathname,a=t.search,s=Object(i.useMemo)((function(){return n.match(/\/search(?:\/(.+))?/)[1]}),[n]),l=Object(i.useMemo)((function(){return new URLSearchParams(a)}),[a]),f=Object(i.useState)(l.get("q")||""),d=f[0],h=f[1],m=u(d,500)[0];return Object(i.useEffect)((function(){h(l.get("q"))}),[l]),Object(i.useEffect)((function(){var e=new URLSearchParams;d&&e.set("q",d);var t=e.toString(),n="/search";s&&(n+="/"+s),t&&(n+="?"+t),Object(c.c)(n,{replace:!0})}),[s,d]),Object(r.jsxs)(H,{children:[Object(r.jsx)(F.a,{children:"Search"}),Object(r.jsx)(o.a,{query:d,setQuery:h,isSearching:!1}),Object(r.jsx)(N,{searchEntity:s,searchQuery:m})]})}},D4Um:function(e,t){var n=new Map;e.exports=function(e,t){return n.has(e)||n.set(e,t(e)),n.get(e)}},EbDI:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},ISyE:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("zLVn"),i=n("nKUr"),a=(n("q1tI"),n("Wbzz")),c=n("5Vy0"),s=n("B8aR"),u=n("vOnD"),o=n("4Fil"),l=Object(u.d)(o.a).withConfig({displayName:"searchResult__StyledSearchResultCard",componentId:"gogu5j-0"})(["display:flex;flex-direction:row;align-items:center;padding:0 1rem 0 0;"]),f=u.d.img.withConfig({displayName:"searchResult__StyledCover",componentId:"gogu5j-1"})(["width:48px;height:64px;object-fit:cover;"]),d=u.d.div.withConfig({displayName:"searchResult__StyledBody",componentId:"gogu5j-2"})(["flex:1;display:flex;flex-direction:column;justify-content:center;padding:0 1rem;"]),h=u.d.div.withConfig({displayName:"searchResult__StyledChildren",componentId:"gogu5j-3"})(["@media (max-width:720px){display:none;}"]);function m(e){var t=e.title,n=e.description,u=e.image,o=e.to,m=e.children,b=Object(r.a)(e,["title","description","image","to","children"]),j=Object(i.jsxs)(l,Object.assign({},b,{children:[Object(i.jsx)(f,{alt:"Cover",src:u}),Object(i.jsxs)(d,{children:[Object(i.jsx)(s.a,{variant:"card",link:!0,maxLines:2,children:t}),Object(i.jsx)(c.a,{small:!0,maxLines:1,children:n})]}),Object(i.jsx)(h,{children:m})]}));return o?Object(i.jsx)(a.a,{to:o,children:j}):j}},Ijbi:function(e,t,n){var r=n("WkPL");e.exports=function(e){if(Array.isArray(e))return r(e)}},RIqP:function(e,t,n){var r=n("Ijbi"),i=n("EbDI"),a=n("ZhPi"),c=n("Bnag");e.exports=function(e){return r(e)||i(e)||a(e)||c()}},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},ZhPi:function(e,t,n){var r=n("WkPL");e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},aEzc:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("nKUr"),i=(n("q1tI"),n("IP2g")),a=n("wHSu"),c=n("FT44"),s=n("L+1Y"),u=n("5Vy0"),o=n("IgWi"),l=n("ISyE"),f=n("m/zQ"),d=n("aXge");function h(e){var t=e.anime,n=Object(o.a)(t).image,h=t.year;return t.season&&(h=t.season+" "+h),Object(r.jsx)(l.a,{title:t.name,description:"Anime • "+h+" • "+t.themes.length+" themes",image:n,to:"/anime/"+t.alias,children:Object(r.jsx)(f.a,{children:Object(r.jsxs)(s.b,{row:!0,wrap:!0,gapsBoth:"0.75rem",children:[t.themes.slice(0,4).map((function(e){return Object(r.jsx)(d.a,{to:"/theme/"+e.id,children:Object(r.jsx)(u.a,{small:!0,children:e.slug})},e.id)})),t.themes.length>4&&Object(r.jsx)(c.a,{icon:!0,title:"Show all themes",children:Object(r.jsx)(i.a,{icon:a.h,fixedWidth:!0})})]})})})}},aXge:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("zLVn"),i=n("nKUr"),a=(n("q1tI"),n("vOnD")),c=n("IP2g"),s=n("wHSu"),u=n("FT44"),o=Object(a.d)(u.a).withConfig({displayName:"play__StyledButtonPlay",componentId:"sc-1xaulno-0"})(["display:flex;flex-direction:row;align-items:center;margin-left:1rem;padding:0 0.5rem 0 0;"]),l=a.d.div.withConfig({displayName:"play__StyledPrefix",componentId:"sc-1xaulno-1"})(["display:inline-flex;justify-content:center;align-items:center;width:2rem;height:2rem;margin-left:-1rem;border-radius:1rem;background-color:",";color:",";"],(function(e){return e.theme.colors.secondaryBackground}),(function(e){return e.theme.colors.primaryBackground[0]}));function f(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(i.jsxs)(o,Object.assign({},n,{children:[Object(i.jsx)(l,{children:Object(i.jsx)(c.a,{icon:s.o,fixedWidth:!0})}),t]}))}},gSOQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("nKUr"),i=n("B8aR"),a=n("5Vy0");function c(e){var t=e.song;return Object(r.jsxs)(i.a,{variant:"card",children:[Object(r.jsx)(a.a,{link:!0,children:t.title}),!!t.artists&&!!t.artists.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(a.a,{small:!0,children:" by "}),t.artists.map((function(e,n){return Object(r.jsx)(a.a,{link:!0,children:(e.as||e.name)+(n===t.artists.length-2?" & ":n<t.artists.length-1?", ":"")},e.as||e.name)}))]})]})}},oY9k:function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},xng9:function(e,t,n){var r=n("o0o1");n("ls82");var i=n("yXPU"),a=n("oY9k"),c=n("D4Um"),s={}.GATSBY_API_URL||"https://animethemes.dev";function u(){return(u=i(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=5;break;case 5:return e.next=7,c(t,(function(e){return a(e,n).then((function(e){return e.json()}))}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={baseUrl:s,fetchJsonCached:function(e,t){return u.apply(this,arguments)},createFieldParams:function(e){return Object.entries(e).map((function(e){return"fields["+e[0]+"]="+e[1].join()})).join("&")}}},yXPU:function(e,t){function n(e,t,n,r,i,a,c){try{var s=e[a](c),u=s.value}catch(o){return void n(o)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var c=e.apply(t,r);function s(e){n(c,i,a,s,u,"next",e)}function u(e){n(c,i,a,s,u,"throw",e)}s(void 0)}))}}}}]);
//# sourceMappingURL=component---src-pages-search-js-6ea38cbfcecc8f242afb.js.map